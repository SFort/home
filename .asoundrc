pcm.both {
  type route;
  slave.pcm {
      type multi;
      slaves.a.pcm "hw:0,0";
      slaves.b.pcm "crea";
      slaves.a.channels 2;
      slaves.b.channels 4;
      bindings.0.slave a;
      bindings.0.channel 0;
      bindings.1.slave a;
      bindings.1.channel 1;

      bindings.2.slave b;
      bindings.2.channel 0;
      bindings.3.slave b;
      bindings.3.channel 1;
      bindings.4.slave b;
      bindings.4.channel 2;
      bindings.5.slave b;
      bindings.5.channel 3;
  }

  ttable.0.0 1;
  ttable.1.1 1;

  ttable.0.2 1; # front left
  ttable.1.3 1; # front right
  ttable.0.4 1; # copy front left to rear left
  ttable.1.5 1; # copy front right to rear right
}
pcm.dmixe {
	ipc_key 9911
	type dmix
	slave.pcm "crea"
}
pcm.dmi {
	ipc_key 9910
	type dmix
	slave.pcm "hw:0,0"
}
pcm.dsnoope {
	ipc_key 9912
	type dsnoop
	slave.pcm "hw:3,0"
}
pcm.duplex {
        type asym
        playback.pcm "dmixe"
        capture.pcm "dsnoope"
}
pcm.!default {
	#rate_converter "samplerate"
        type plug
    	#slave.pcm "both"
	slave.pcm "duplex"
}
pcm.crea {
	format S32_LE
	rate 96000
	type hw
	card 1
	device 0
}
ctl.!default {
	type hw
	card 1
}
